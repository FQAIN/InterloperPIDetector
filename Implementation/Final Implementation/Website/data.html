<!DOCTYPE html>
<html>
  <head>
    <title>Interloper PI Detector</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>    
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js"></script>
<style>
      body {
        background-color: #292b2c;
        padding: 20px;
      }
* {
  box-sizing: border-box;
}

/* Create three equal columns that floats next to each other */
.column {
  float: left;
  width: 33.33%;
  padding: 10px;
background-color: white;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
    </style>
  </head>
  <body>
<div id="print">
    <h1 style="color: white">Motion Sensor Trigger History</h1>
    <br>
    <div>
      <table class="table table-dark" id="motionsensor" border="1">
        <thead>
          <tr>
            <td>Link of Data Retrieved from Firebase RealTime Database</td>
            <td>Motion Sensor Triggered Date & Time Stamps</td>
          </tr>
        </thead>
        <tbody id="table_body"></tbody>
      </table>
    </div>
    <br />
    <button type="button" class="btn btn-dark" class="button" onclick="exportTableToExcel('motionsensor', 'motionsensor-data')">Export Table Data To Excel File</button>
<br /><br /><br /><br />
 <h1 style="color: white">Data Web Dashbaord Statistics</h1>
 <br />
<div id="print-btn"></div>
<button id="submit" class="btn btn-dark" class="button">Download PDF File</button>
 <br />
<div class="row">
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart" style="width:100%;max-width:600px"></canvas>
  </div>
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart2" style="width:100%;max-width:600px"></canvas>
  </div>
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart3" style="width:100%;max-width:350px"></canvas>
  </div>
</div>
<br><br><br><br><br><br><br><br>
<div class="row">
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart4" style="width:100%;max-width:600px"></canvas>
  </div>
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart6" style="width:100%;max-width:600px"></canvas>
  </div>
  <div class="column" style="background-color:#292b2c;">
<canvas id="myChart5" style="width:100%;max-width:600px"></canvas>
  </div>
</div>

<script>
var doc = new jsPDF();
var specialElementHandlers = {
    '#print-btn': function (element, renderer) {
        return true;
    }
};

$('#submit').click(function () {
    doc.fromHTML($('#print').html(), 15, 15, {
        'width': 170,
            'elementHandlers': specialElementHandlers
    });
    doc.save('pdf-version.pdf');
});
</script>
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [195, 344, 123, 422, 200, 280, 300];
var barColors = ["#800000"];

new Chart("myChart6", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger History This Week"
    }
  }
});
</script>    
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [195, 344, 123, 422, 200, 280, 300];
var barColors = ["#800000", "#de1738","#FF0000","#722f37","brown", "#b92e34", "#e32636"];

new Chart("myChart5", {
  type: "polarArea",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger History Size Proportion This Week in the Limerick Region"
    }
  }
});
</script>    
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [195, 344, 123, 422, 200, 280, 300];
var barColors = ["#800000"];

new Chart("myChart4", {
  type: "radar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger History Area Proportion This Week in the Limerick Region"
    }
  }
});
</script>    
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [25, 20, 15, 10, 5, 12, 7];
var barColors = ["#800000", "#de1738","#FF0000","#722f37","brown", "#b92e34", "#e32636"];

new Chart("myChart3", {
  type: "pie",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger Porporation Size This Week in Your House"
    }
  }
});
</script>
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [25, 20, 15, 10, 5, 12, 7];
var barColors = ["#800000"];

new Chart("myChart2", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger Trend Rate This Week in Your House"
    }
  }
});
</script>
<script>
var xValues = ["21/03/2022", "22/03/2022", "23/03/2022", "24/03/2022", "25/03/2022", "26/03/2022", "27/03/2022"];
var yValues = [25, 20, 15, 10, 5, 12, 7];
var barColors = ["#800000", "#de1738","#FF0000","#722f37","brown", "#b92e34", "#e32636"];

new Chart("myChart", {
  type: "bar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Motion Sensor Trigger History This Week in Your House"
    }
  }
});
</script>    
<script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <script>
      (function() {
          var config = {
            apiKey: "AIzaSyC0k72cW3c9269zuVHXwVkl2RV5TX_ozZ4",
            authDomain: "interloper-pi-detector.firebaseapp.com",
            databaseURL: "https://interloper-pi-detector-default-rtdb.firebaseio.com",
            projectId: "interloper-pi-detector",
            storageBucket: "interloper-pi-detector.appspot.com",
            messagingSenderId: "203002723801",
            appId: "1:203002723801:web:31a494a6d82ae7a368edc8",
            measurementId: "G-68NLMPZM6K"
          };
          firebase.initializeApp(config);
          const req = document.getElementById('sensorTriggered');
          const dbRefReq = firebase.database().ref().child('sensorTriggered')
          dbRefReq.on('child_added', snap => {
              var id = firebase.database().ref();
              var name = snap.child("sensorTriggered").val();
              $("#table_body").append(" <tr> <td> "+id+" </td> <td> "+name+" </td>");
              });
          }());
    </script>
    <script src="view.js"></script>
    <script>
      function exportTableToExcel(tableID, filename = '') {
        var downloadLink;
        var dataType = 'application/vnd.ms-excel';
        var tableSelect = document.getElementById(tableID);
        var tableHTML = tableSelect.outerHTML.replace(/ /g, '%20');
        // Specify file name
        filename = filename ? filename + '.xls' : 'excel_data.xls';
        // Create download link element
        downloadLink = document.createElement("a");
        document.body.appendChild(downloadLink);
        if (navigator.msSaveOrOpenBlob) {
          var blob = new Blob(['\ufeff', tableHTML], {
            type: dataType
          });
          navigator.msSaveOrOpenBlob(blob, filename);
        } else {
          // Create a link to the file
          downloadLink.href = 'data:' + dataType + ', ' + tableHTML;
          // Setting the file name
          downloadLink.download = filename;
          //triggering the function
          downloadLink.click();
        }
      }
    </script>
</div>
  </body>
</html>